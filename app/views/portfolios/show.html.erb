<div class="container">
  <div class="graph-days">
    <li>1 day</li>
    <li class="days-active">7 days</li>
    <li>30 days</li>
  </div>

  <div class="display">
    <div class="graph">
      <%= area_chart(@data,
        library: {
          scales: {
            x: {ticks: {display: false}},
            y: {ticks: {display: false}}
            }
          },
          height: "23vh"
      )%>
    </div>
  </div>

  <% unless @portfolio.nfts.empty? %>
    <div class="portfolio-holdings">
      <% @portfolio.collections.each do |collection| %>
        <%= link_to collection_path(collection) do %>
          <div class="card-homepage">
            <div class="image-homepage" style="background-image: url('<%= collection.image %>');">
            </div>
            <div class="collection-details">
              <div class="info">
                <h2><%= collection.name %></h2>
                <div class="info-detail">
                  <div class="short-desc">
                    <% nfts = [] %>
                    <% collection.nfts.where(collection: collection, portfolio: current_user.portfolio).each do |nft| %>
                      <% nfts << nft.purchase_quantity %>
                    <% end %>
                    <%= nfts.sum %><p>Owned</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="price">
              <i class="fa-brands fa-ethereum"></i><p>
                <% unless collection.histories.last.nil? %>
                  <%= collection.histories.last.price.round(2) %>
                <% else %>
                  NIL
                <% end %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="empty-portf">
      <h1>Your Portfilio is empty</h1>
      <br>
      <h2>Look through our <%= link_to "Discover Page", collections_path %></h2>
      <br>
      <h2>And Add your NFTs to Track</h2>
    </div>
  <% end %>
</div>
